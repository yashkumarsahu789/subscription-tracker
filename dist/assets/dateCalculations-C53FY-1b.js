import{t as i,c,p as u}from"./index-B6nGEfoE.js";function s(t,n,a){const e=i(t,a?.in);if(isNaN(n))return c(t,NaN);if(!n)return e;const o=e.getDate(),r=c(t,e.getTime());r.setMonth(e.getMonth()+n+1,0);const d=r.getDate();return o>=d?r:(e.setFullYear(r.getFullYear(),r.getMonth(),o),e)}function l(t,n,a){return s(t,n*3,a)}function f(t,n,a){return s(t,n*12,a)}function y(t,n){const a=u(t);let e;return n==="monthly"?e=s(a,1):n==="quarterly"?e=l(a,1):n==="yearly"?e=f(a,1):e=a,e.toISOString().split("T")[0]}function h(t,n,a){const e=y(t.nextDate,t.cycle),o={id:crypto.randomUUID(),paidDate:n,amount:a,currency:t.currency,status:"completed"},r={...t,nextDate:e,lastPaidDate:n,paymentHistory:[...t.paymentHistory||[],o],status:"active"};return{newPaymentRecord:o,newNextDate:e,updatedSubscription:r}}export{y as calculateNextBillingDate,h as handleMarkAsPaid};
